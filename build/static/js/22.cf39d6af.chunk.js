(this.webpackJsonpmedicus=this.webpackJsonpmedicus||[]).push([[22],{142:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return M}));var r=n(0),a=n(12),c=n.n(a),s=n(32),o=n(13),i=n(11),l=n(9),u=n(17),j=n(51),d=n(50),b=n(31),h=n(1);function m(e){var t=Object(r.useState)(""),n=Object(l.a)(t,2),a=n[0],j=n[1],b=Object(r.useState)({description:""}),m=Object(l.a)(b,2),p=m[0],f=m[1];function O(){return(O=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f(Object(i.a)(Object(i.a)({},p),{},Object(s.a)({},t.target.name,t.target.value)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=Object(o.a)(c.a.mark((function t(n){var r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,fetch("/api/users/".concat(e.user.username),{method:"PUT",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.session.authToken)},body:JSON.stringify({description:p.description})});case 4:return r=t.sent,t.next=7,r.json();case 7:if(a=t.sent,r.ok){t.next=10;break}throw new Error(a.message);case 10:e.updateState&&e.updateState({description:p.description}),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(1),console.error("Failed to update about information for user- ".concat(e.user.username,". ").concat(t.t0)),j(t.t0.message);case 17:case"end":return t.stop()}}),t,null,[[1,13]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){f((function(t){return Object(i.a)(Object(i.a)({},t),{},{description:e.description})}))}),[e.description]),Object(h.jsx)(u.e,{children:Object(h.jsxs)(d.a,{handleSubmit:function(e){return x.apply(this,arguments)},children:[a&&Object(h.jsx)(d.f,{className:"justify-content-center",children:Object(h.jsx)("div",{className:"alert alert-danger",role:"alert",children:a})}),Object(h.jsx)(d.c,{children:Object(h.jsx)("textarea",{id:"descriptionInput01",type:"text",name:"description",className:"form-control",value:p.description,onChange:function(e){return O.apply(this,arguments)},rows:"3",placeholder:"Say something about yourself."})}),Object(h.jsx)(d.f,{className:"justify-content-center",children:Object(h.jsx)(d.g,{className:"col-auto col-md-4",children:"Save"})})]})})}function p(e){var t=Object(r.useState)(!1),n=Object(l.a)(t,2),a=n[0],s=n[1],u=Object(r.useState)(!1),d=Object(l.a)(u,2),p=d[0],f=d[1],O=Object(r.useState)({description:""}),x=Object(l.a)(O,2),g=x[0],v=x[1];function y(e){return N.apply(this,arguments)}function N(){return(N=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),s(!a);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v((function(e){return Object(i.a)(Object(i.a)({},e),t)})),s(!a);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){function t(){return(t=Object(o.a)(c.a.mark((function t(){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f(!0),t.next=4,fetch("/api/users/".concat(e.user.username),{method:"GET",credentials:"same-origin",headers:{Authorization:"Bearer ".concat(e.session.authToken)}});case 4:return n=t.sent,t.next=7,n.json();case 7:if(r=t.sent,n.ok){t.next=10;break}throw new Error(r.message);case 10:v((function(e){return Object(i.a)(Object(i.a)({},e),{},{description:r.description})})),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.error("Failed to get about information for user- ".concat(e.user.username,". ").concat(t.t0));case 16:return t.prev=16,f(!1),t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[0,13,16,19]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e.user,e.session]),Object(h.jsxs)(j.e,{children:[Object(h.jsx)(j.a,{title:"About me",children:!e.disableEdit&&(a?Object(h.jsx)(j.b,{name:"Cancel",icon:"clear",handleClick:y}):Object(h.jsx)(j.b,{name:"Edit",icon:"edit",handleClick:y}))}),Object(h.jsx)(j.f,{children:a?Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(m,{session:e.session,user:e.user,description:g.description,updateState:function(e){return w.apply(this,arguments)}})}):Object(h.jsx)(h.Fragment,{children:p?Object(h.jsx)(b.b,{isLoading:!0}):Object(h.jsx)("p",{className:"my-0",children:g.description})})})]})}var f=n(52),O=n(33),x=n(23);function g(e){return Object(h.jsx)(j.l,{children:Object(h.jsx)(u.e,{children:Object(h.jsx)(u.g,{children:Object(h.jsx)(u.a,{className:"md-font-sm text-center text-muted",children:"No education available"})})})})}function v(e){function t(){return(t=Object(o.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),e.handleDelete&&e.handleDelete(e.degree.id);case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var n=e.degree.username,r=Object(x.o)({user:e.session})===n,a=new Date(e.degree.fromDate),s=new Date(e.degree.toDate);return Object(h.jsx)(j.l,{children:Object(h.jsx)(u.e,{className:"px-0",children:Object(h.jsxs)(u.g,{children:[Object(h.jsxs)(u.a,{children:[Object(h.jsx)(u.g,{children:Object(h.jsx)(u.a,{className:"align-self-center",children:Object(h.jsxs)(u.g,{children:[Object(h.jsx)(u.a,{className:"text-truncate font-weight-bold",children:e.degree.degree}),Object(h.jsxs)(u.a,{className:"col-auto",children:[Object(h.jsx)(O.e,{date:a})," - ",Object(h.jsx)(O.e,{date:s})]})]})})}),Object(h.jsx)(u.g,{children:Object(h.jsx)(u.a,{className:"text-truncate",children:e.degree.university})})]}),Object(h.jsx)(u.a,{className:"col-auto",children:r&&Object(h.jsx)(j.i,{children:Object(h.jsx)(j.j,{handleClick:function(e){return t.apply(this,arguments)},children:"Delete"})})})]})})})}function y(e){var t=new Date,n=Object(r.useState)(""),a=Object(l.a)(n,2),u=a[0],j=a[1],b=Object(r.useState)({degree:x.l.length?x.l[0]:"",fromMonth:t.getMonth()+1,fromYear:t.getFullYear(),toMonth:t.getMonth()+1,toYear:t.getFullYear(),university:""}),m=Object(l.a)(b,2),p=m[0],f=m[1];function g(e){return v.apply(this,arguments)}function v(){return(v=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f((function(e){return Object(i.a)(Object(i.a)({},e),{},Object(s.a)({},t.target.name,t.target.value))}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=Object(o.a)(c.a.mark((function t(n){var r,a,s,o,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,r=new Date(p.fromYear,p.fromMonth-1),a=new Date(p.toYear,p.toMonth-1),s={degree:p.degree,fromDate:r,toDate:a,university:p.university},t.next=7,fetch("/api/users/".concat(e.user.username,"/degrees"),{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.session.authToken)},body:JSON.stringify(s)});case 7:return o=t.sent,t.next=10,o.json();case 10:if(i=t.sent,o.ok){t.next=13;break}throw new Error(i.message);case 13:e.appendDegree&&e.appendDegree(s),t.next=20;break;case 16:t.prev=16,t.t0=t.catch(1),console.error("Failed to update education information for user- ".concat(e.user.username,". ").concat(t.t0)),j(t.t0.message);case 20:case"end":return t.stop()}}),t,null,[[1,16]])})))).apply(this,arguments)}return Object(h.jsxs)(d.a,{handleSubmit:function(e){return y.apply(this,arguments)},children:[p.errorMessage&&Object(h.jsx)(d.f,{className:"justify-content-center",children:Object(h.jsx)("div",{className:"alert alert-danger",role:"alert",children:u})}),Object(h.jsxs)(d.f,{children:[Object(h.jsx)(d.d,{for:"educationForm01",className:"col-sm-4",children:"Qualification"}),Object(h.jsx)(d.c,{className:"col-sm-8",children:Object(h.jsx)(x.k,{id:"educationForm01",className:"form-control",name:"degree",label:"Degree",value:p.degree,handleChange:g,required:!0})})]}),Object(h.jsxs)(d.f,{children:[Object(h.jsx)(d.e,{for:"educationForm02",className:"col-sm-4",children:"From Date"}),Object(h.jsx)(d.c,{className:"col-sm-4",children:Object(h.jsx)(O.i,{id:"educationForm02",className:"form-control",name:"fromMonth",label:"From Month",shortForm:!0,value:p.fromMonth,handleChange:g,required:!0})}),Object(h.jsx)(d.c,{className:"col-sm-4",children:Object(h.jsx)(O.k,{id:"educationForm03",className:"form-control",name:"fromYear",label:"From Year",startYear:t.getFullYear()-100,endYear:t.getFullYear(),value:p.fromYear,handleChange:g,required:!0})})]}),Object(h.jsxs)(d.f,{children:[Object(h.jsx)(d.e,{for:"educationForm04",className:"col-sm-4",children:"To Date"}),Object(h.jsx)(d.c,{className:"col-sm-4",children:Object(h.jsx)(O.i,{id:"educationForm04",className:"form-control",name:"toMonth",label:"To Month",shortForm:!0,value:p.toMonth,handleChange:g,required:!0})}),Object(h.jsx)(d.c,{className:"col-sm-4",children:Object(h.jsx)(O.k,{id:"educationForm05",className:"form-control",name:"toYear",label:"To Year",startYear:t.getFullYear()-100,endYear:t.getFullYear(),value:p.toYear,handleChange:g,required:!0})})]}),Object(h.jsxs)(d.f,{children:[Object(h.jsx)(d.d,{for:"educationForm06",className:"col-sm-4",children:"University"}),Object(h.jsx)(d.c,{className:"col-sm-8",children:Object(h.jsx)("input",{id:"educationForm06",name:"university",type:"text",className:"form-control",value:p.university,onChange:g,placeholder:"Name of University"})})]}),Object(h.jsx)(d.f,{className:"justify-content-center",children:Object(h.jsx)(d.g,{className:"col-auto col-md-4",children:"Add"})})]})}function N(e){var t=Object(r.useState)(!1),n=Object(l.a)(t,2),a=n[0],s=n[1],i=Object(r.useState)(!1),u=Object(l.a)(i,2),d=u[0],m=u[1],p=Object(r.useState)([]),O=Object(l.a)(p,2),x=O[0],N=O[1];function w(e){return k.apply(this,arguments)}function k(){return(k=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),s(!a);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return(F=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N((function(e){return[].concat(Object(f.a)(e),[t])})),s(!1);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){function t(){return(t=Object(o.a)(c.a.mark((function t(){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,m(!0),t.next=4,fetch("/api/users/".concat(e.user.username,"/degrees"),{method:"GET",credentials:"same-origin",headers:{Authorization:"Bearer ".concat(e.session.authToken)}});case 4:return n=t.sent,t.next=7,n.json();case 7:if(r=t.sent,n.ok){t.next=10;break}throw new Error(r.message);case 10:N((function(e){return[].concat(Object(f.a)(e),Object(f.a)(r))})),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.error("Failed to get education information for user- ".concat(e.user.username,". ").concat(t.t0));case 16:return t.prev=16,m(!1),t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[0,13,16,19]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e.user,e.session]),Object(h.jsxs)(j.e,{children:[Object(h.jsx)(j.a,{title:"Education",children:!e.disableEdit&&(a?Object(h.jsx)(j.b,{name:"Cancel",icon:"clear",handleClick:w}):Object(h.jsx)(j.b,{name:"Add",icon:"add",handleClick:w}))}),a&&Object(h.jsx)(j.f,{children:Object(h.jsx)(y,{session:e.session,user:e.user,appendDegree:function(e){return F.apply(this,arguments)}})}),Object(h.jsx)(j.f,{children:d?Object(h.jsx)(b.b,{isLoading:!0}):Object(h.jsx)(j.k,{children:0!==x.length?Object(h.jsx)(h.Fragment,{children:x.map((function(t,n){return Object(h.jsx)(v,{session:e.session,degree:t},n)}))}):Object(h.jsx)(g,{})})})]})}function w(e){return Object(h.jsx)(j.l,{children:Object(h.jsx)(u.e,{children:Object(h.jsx)(u.g,{children:Object(h.jsx)(u.a,{className:"md-font-sm text-center text-muted",children:"No experience available"})})})})}function k(e){function t(){return(t=Object(o.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),e.handleDelete&&e.handleDelete(e.job.id);case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var n=e.job.username,r=Object(x.o)({user:e.session})===n,a=new Date(e.job.fromDate),s=new Date(e.job.toDate);return Object(h.jsx)(j.l,{children:Object(h.jsx)(u.e,{className:"px-0",children:Object(h.jsxs)(u.g,{children:[Object(h.jsxs)(u.a,{children:[Object(h.jsx)(u.g,{children:Object(h.jsx)(u.a,{className:"align-self-center",children:Object(h.jsxs)(u.g,{children:[Object(h.jsx)(u.a,{className:"text-truncate font-weight-bold",children:e.job.title}),Object(h.jsxs)(u.a,{className:"col-auto",children:[Object(h.jsx)(O.e,{date:a})," - ",Object(h.jsx)(O.e,{date:s})]})]})})}),Object(h.jsx)(u.g,{children:Object(h.jsx)(u.a,{className:"text-truncate",children:e.job.company})})]}),Object(h.jsx)(u.a,{className:"col-auto",children:r&&Object(h.jsx)(j.i,{children:Object(h.jsx)(j.j,{handleClick:function(e){return t.apply(this,arguments)},children:"Delete"})})})]})})})}function F(e){var t=new Date,n=Object(r.useState)(""),a=Object(l.a)(n,2),u=a[0],j=a[1],b=Object(r.useState)({title:"",fromMonth:t.getMonth()+1,fromYear:t.getFullYear(),toMonth:t.getMonth()+1,toYear:t.getFullYear(),company:""}),m=Object(l.a)(b,2),p=m[0],f=m[1];function x(e){return g.apply(this,arguments)}function g(){return(g=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f((function(e){return Object(i.a)(Object(i.a)({},e),{},Object(s.a)({},t.target.name,t.target.value))}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return(v=Object(o.a)(c.a.mark((function t(n){var r,a,s,o,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,r=new Date(p.fromYear,p.fromMonth-1),a=new Date(p.toYear,p.toMonth-1),s={title:p.title,fromDate:r,toDate:a,company:p.company},t.next=7,fetch("/api/users/".concat(e.user.username,"/jobs"),{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.session.authToken)},body:JSON.stringify(s)});case 7:return o=t.sent,t.next=10,o.json();case 10:if(i=t.sent,o.ok){t.next=13;break}throw new Error(i.message);case 13:e.appendJob&&e.appendJob(s),t.next=20;break;case 16:t.prev=16,t.t0=t.catch(1),console.error("Failed to update experience information for user- ".concat(e.user.username,". ").concat(t.t0)),j(t.t0.message);case 20:case"end":return t.stop()}}),t,null,[[1,16]])})))).apply(this,arguments)}return Object(h.jsxs)(d.a,{handleSubmit:function(e){return v.apply(this,arguments)},children:[p.errorMessage&&Object(h.jsx)(d.f,{className:"justify-content-center",children:Object(h.jsx)("div",{className:"alert alert-danger",role:"alert",children:u})}),Object(h.jsxs)(d.f,{children:[Object(h.jsx)(d.d,{for:"experienceForm01",className:"col-sm-4",children:"Title"}),Object(h.jsx)(d.c,{className:"col-sm-8",children:Object(h.jsx)("input",{id:"experienceForm01",name:"title",type:"text",className:"form-control",value:p.title,onChange:x,placeholder:"Title"})})]}),Object(h.jsxs)(d.f,{children:[Object(h.jsx)(d.e,{for:"experienceForm02",className:"col-sm-4",children:"From Date"}),Object(h.jsx)(d.c,{className:"col-sm-4",children:Object(h.jsx)(O.i,{id:"experienceForm02",className:"form-control",name:"fromMonth",label:"From Month",shortForm:!0,value:p.fromMonth,handleChange:x,required:!0})}),Object(h.jsx)(d.c,{className:"col-sm-4",children:Object(h.jsx)(O.k,{id:"experienceForm03",className:"form-control",name:"fromYear",label:"From Year",startYear:t.getFullYear()-100,endYear:t.getFullYear(),value:p.fromYear,handleChange:x,required:!0})})]}),Object(h.jsxs)(d.f,{children:[Object(h.jsx)(d.e,{for:"experienceForm04",className:"col-sm-4",children:"To Date"}),Object(h.jsx)(d.c,{className:"col-sm-4",children:Object(h.jsx)(O.i,{id:"experienceForm04",className:"form-control",name:"toMonth",label:"To Month",shortForm:!0,value:p.toMonth,handleChange:x,required:!0})}),Object(h.jsx)(d.c,{className:"col-sm-4",children:Object(h.jsx)(O.k,{id:"experienceForm05",className:"form-control",name:"toYear",label:"To Year",startYear:t.getFullYear()-100,endYear:t.getFullYear(),value:p.toYear,handleChange:x,required:!0})})]}),Object(h.jsxs)(d.f,{children:[Object(h.jsx)(d.d,{for:"experienceForm06",className:"col-sm-4",children:"Company"}),Object(h.jsx)(d.c,{className:"col-sm-8",children:Object(h.jsx)("input",{id:"experienceForm06",name:"company",type:"text",className:"form-control",value:p.company,onChange:x,placeholder:"Name of Company"})})]}),Object(h.jsx)(d.f,{className:"justify-content-center",children:Object(h.jsx)(d.g,{className:"col-auto col-md-4",children:"Add"})})]})}function D(e){var t=Object(r.useState)(!1),n=Object(l.a)(t,2),a=n[0],s=n[1],i=Object(r.useState)(!1),u=Object(l.a)(i,2),d=u[0],m=u[1],p=Object(r.useState)([]),O=Object(l.a)(p,2),x=O[0],g=O[1];function v(e){return y.apply(this,arguments)}function y(){return(y=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),s(!a);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g((function(e){return[].concat(Object(f.a)(e),[t])})),s(!1);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){function t(){return(t=Object(o.a)(c.a.mark((function t(){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,m(!0),t.next=4,fetch("/api/users/".concat(e.user.username,"/jobs"),{method:"GET",credentials:"same-origin",headers:{Authorization:"Bearer ".concat(e.session.authToken)}});case 4:return n=t.sent,t.next=7,n.json();case 7:if(r=t.sent,n.ok){t.next=10;break}throw new Error(r.message);case 10:g((function(e){return[].concat(Object(f.a)(e),Object(f.a)(r))})),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.error("Failed to get experience information for user- ".concat(e.user.username,". ").concat(t.t0));case 16:return t.prev=16,m(!1),t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[0,13,16,19]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e.user,e.session]),Object(h.jsxs)(j.e,{children:[Object(h.jsx)(j.a,{title:"Experience",children:!e.disableEdit&&(a?Object(h.jsx)(j.b,{name:"Cancel",icon:"clear",handleClick:v}):Object(h.jsx)(j.b,{name:"Add",icon:"add",handleClick:v}))}),a&&Object(h.jsx)(j.f,{children:Object(h.jsx)(F,{session:e.session,user:e.user,appendJob:function(e){return N.apply(this,arguments)}})}),Object(h.jsx)(j.f,{children:d?Object(h.jsx)(b.b,{isLoading:!0}):Object(h.jsx)(j.k,{children:0!==x.length?Object(h.jsx)(h.Fragment,{children:x.map((function(t,n){return Object(h.jsx)(k,{session:e.session,job:t},n)}))}):Object(h.jsx)(w,{})})})]})}function Y(e){return Object(h.jsx)(j.l,{children:Object(h.jsx)(u.e,{children:Object(h.jsx)(u.g,{children:Object(h.jsx)(u.a,{className:"md-font-sm text-center text-muted",children:"No insurance available"})})})})}function S(e){function t(){return(t=Object(o.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),e.handleDelete&&e.handleDelete(e.insurance.id);case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var n=e.insurance.username,r=Object(x.o)({user:e.session})===n,a=new Date(e.insurance.expiryDate);return Object(h.jsx)(j.l,{children:Object(h.jsx)(u.e,{className:"px-0",children:Object(h.jsxs)(u.g,{children:[Object(h.jsxs)(u.a,{children:[Object(h.jsx)(u.g,{children:Object(h.jsx)(u.a,{className:"align-self-center",children:Object(h.jsxs)(u.g,{children:[Object(h.jsx)(u.a,{className:"text-truncate font-weight-bold",children:e.insurance.providerName}),Object(h.jsx)(u.a,{className:"col-auto",children:Object(h.jsx)(O.e,{date:a})})]})})}),Object(h.jsx)(u.g,{children:Object(h.jsx)(u.a,{className:"text-truncate",children:e.insurance.insuranceId})})]}),Object(h.jsx)(u.a,{className:"col-auto",children:r&&Object(h.jsx)(j.i,{children:Object(h.jsx)(j.j,{handleClick:function(e){return t.apply(this,arguments)},children:"Delete"})})})]})})})}function C(e){var t=new Date,n=Object(r.useState)(""),a=Object(l.a)(n,2),u=a[0],j=a[1],b=Object(r.useState)({providerName:"",insuranceId:"",expiryMonth:t.getMonth()+1,expiryYear:t.getFullYear()}),m=Object(l.a)(b,2),p=m[0],f=m[1];function x(e){return g.apply(this,arguments)}function g(){return(g=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f((function(e){return Object(i.a)(Object(i.a)({},e),{},Object(s.a)({},t.target.name,t.target.value))}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return(v=Object(o.a)(c.a.mark((function t(n){var r,a,s,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,r=new Date(p.expiryYear,p.expiryMonth-1),a={providerName:p.providerName,insuranceId:p.insuranceId,expiryDate:r},t.next=6,fetch("/api/users/".concat(e.user.username,"/insurances"),{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.session.authToken)},body:JSON.stringify(a)});case 6:return s=t.sent,t.next=9,s.json();case 9:if(o=t.sent,s.ok){t.next=12;break}throw new Error(o.message);case 12:e.appendInsurance&&e.appendInsurance(a),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(1),console.error("Failed to update insurance information for user- ".concat(e.user.username,". ").concat(t.t0)),j(t.t0.message);case 19:case"end":return t.stop()}}),t,null,[[1,15]])})))).apply(this,arguments)}return Object(h.jsxs)(d.a,{handleSubmit:function(e){return v.apply(this,arguments)},children:[p.errorMessage&&Object(h.jsx)(d.f,{className:"justify-content-center",children:Object(h.jsx)("div",{className:"alert alert-danger",role:"alert",children:u})}),Object(h.jsxs)(d.f,{children:[Object(h.jsx)(d.d,{for:"insuranceForm01",className:"col-sm-4",children:"Provider Name"}),Object(h.jsx)(d.c,{className:"col-sm-8",children:Object(h.jsx)("input",{id:"insuranceForm01",name:"providerName",type:"text",className:"form-control",value:p.providerName,onChange:x,placeholder:"Name of Provider"})})]}),Object(h.jsxs)(d.f,{children:[Object(h.jsx)(d.d,{for:"insuranceForm02",className:"col-sm-4",children:"Insurance ID"}),Object(h.jsx)(d.c,{className:"col-sm-8",children:Object(h.jsx)("input",{id:"insuranceForm02",name:"insuranceId",type:"text",className:"form-control",value:p.insuranceId,onChange:x,placeholder:"Insurance ID"})})]}),Object(h.jsxs)(d.f,{children:[Object(h.jsx)(d.e,{for:"insuranceForm03",className:"col-sm-4",children:"Expiry Date"}),Object(h.jsx)(d.c,{className:"col-sm-4",children:Object(h.jsx)(O.i,{id:"insuranceForm03",className:"form-control",name:"expiryMonth",label:"Expiry Month",shortForm:!0,value:p.expiryMonth,handleChange:x,required:!0})}),Object(h.jsx)(d.c,{className:"col-sm-4",children:Object(h.jsx)(O.k,{id:"insuranceForm04",className:"form-control",name:"expiryYear",label:"Expiry Year",startYear:t.getFullYear()-100,endYear:t.getFullYear(),value:p.expiryYear,handleChange:x,required:!0})})]}),Object(h.jsx)(d.f,{className:"justify-content-center",children:Object(h.jsx)(d.g,{className:"col-auto col-md-4",children:"Add"})})]})}function E(e){var t=Object(r.useState)(!1),n=Object(l.a)(t,2),a=n[0],s=n[1],i=Object(r.useState)(!1),u=Object(l.a)(i,2),d=u[0],m=u[1],p=Object(r.useState)([]),O=Object(l.a)(p,2),x=O[0],g=O[1];function v(e){return y.apply(this,arguments)}function y(){return(y=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),s(!a);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g((function(e){return[].concat(Object(f.a)(e),[t])})),s(!1);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){function t(){return(t=Object(o.a)(c.a.mark((function t(){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,m(!0),t.next=4,fetch("/api/users/".concat(e.user.username,"/insurances"),{method:"GET",credentials:"same-origin",headers:{Authorization:"Bearer ".concat(e.session.authToken)}});case 4:return n=t.sent,t.next=7,n.json();case 7:if(r=t.sent,n.ok){t.next=10;break}throw new Error(r.message);case 10:g((function(e){return[].concat(Object(f.a)(e),Object(f.a)(r))})),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.error("Failed to get insurance information for user- ".concat(e.user.username,". ").concat(t.t0));case 16:return t.prev=16,m(!1),t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[0,13,16,19]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e.user,e.session]),Object(h.jsxs)(j.e,{children:[Object(h.jsx)(j.a,{title:"Insurance",children:!e.disableEdit&&(a?Object(h.jsx)(j.b,{name:"Cancel",icon:"clear",handleClick:v}):Object(h.jsx)(j.b,{name:"Add",icon:"add",handleClick:v}))}),a&&Object(h.jsx)(j.f,{children:Object(h.jsx)(C,{session:e.session,user:e.user,appendInsurance:function(e){return N.apply(this,arguments)}})}),Object(h.jsx)(j.f,{children:d?Object(h.jsx)(b.b,{isLoading:!0}):Object(h.jsx)(j.k,{children:0!==x.length?Object(h.jsx)(h.Fragment,{children:x.map((function(t,n){return Object(h.jsx)(S,{session:e.session,insurance:t},n)}))}):Object(h.jsx)(Y,{})})})]})}function M(e){var t=!!e.session.isPhysician;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(p,{session:e.session,user:e.user,disableEdit:e.disableEdit}),t&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(N,{session:e.session,user:e.user,disableEdit:e.disableEdit}),Object(h.jsx)(D,{session:e.session,user:e.user,disableEdit:e.disableEdit})]}),Object(h.jsx)(E,{session:e.session,user:e.user,disableEdit:e.disableEdit})]})}},52:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(24);var a=n(20);function c(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(a.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);
//# sourceMappingURL=22.cf39d6af.chunk.js.map